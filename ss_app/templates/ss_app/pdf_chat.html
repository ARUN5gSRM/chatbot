{% extends "ss_app/base.html" %}
{% block title %}PDF Chat | Chatbot{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="card p-4 shadow-sm">
    <h4>ðŸ”Ž PDF Search</h4>
    {% if error %}<div class="alert alert-danger">{{ error }}</div>{% endif %}
    <form method="post">
      {% csrf_token %}
      <div class="input-group mb-3">
        <input name="query" class="form-control" placeholder="Ask about your PDFs..." required>
        <button class="btn btn-success">Search</button>
      </div>
    </form>

    {% if results %}
      <h6>Top results</h6>
      <div style="max-height:50vh;overflow:auto;">
        {% for r in results %}
          <div class="p-2 mb-2 border rounded bg-white">
            <strong>Rank {{ r.rank }}</strong> â€” <small class="text-muted">sim: {{ r.similarity }}</small>
            <div class="mt-2" style="white-space:pre-line;">{{ r.text }}</div>
          </div>
        {% endfor %}
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}
